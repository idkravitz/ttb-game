<!DOCTYPE html>

<html>
<head>
    <title>TTB-GAME</title>
    <link href="style.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery-1.4.3.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function(){
            $("form[name='register']").submit(function(obj){
                var success = false;
                $.ajax({url:'/',
                    data:{
                        cmd: "register",
                        username: $("input[name='name']", this).val(),
                        password: $("input[name='password']", this).val()
                    },
                    success: function(text){
                        success = text["status"] == 'ok';
                        if (!success) {
                            var message = text["message"];
                            var active_element;
                            $("#username_error, #password_error").hide();
                            active_element = /.*username.*/i.test(message)
                                ? $("#username_error") : $("#password_error");
                            active_element.show();
                            $('span', active_element).text(message);
                        }
                    }, 
                    dataType: 'json',
                    type: 'POST',
                    async: false
                });
                return success;
            });
        });
    </script>
</head>

<body>
    <div id="header-wrapper">
        <div id="header">
            <div class="name">TTB-GAME</div>
        </div>
    </div>

    <div id="page">
        <div id="content">
            <div id="block-sign">
                <div class="h1">
                    Sign in with your account:
                </div>

                <div class="section">
                    <div class="register-form-holder">
                        <form name="register" action="main.html" method="post">
                            <p>Your name:</p>
                            <div class="error" id="username_error"><img src='/images/error.png'><span></span></div>
                            <input type="text" name="name" class="name">

                            <p>Your password:</p>
                            <div class="error" id="password_error"><img src='/images/error.png'><span></span></div>
                            <input type="text" name="password" class="password">

                            <p class="submit">
                                <input type="submit" class="send-message" value="Sign in">
                            </p>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="footer-wrapper-basic">
        <div id="footer"></div>
    </div>
</body>
</html>
